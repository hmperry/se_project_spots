!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},t=(e,t,n)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(n.inputErrorClass)},n=(e,t,n)=>{(e=>e.some((e=>!e.validity.valid)))(e)?o(t,n):(t.classList.remove(n.inactiveButtonClass),t.disabled=!1)},o=(e,t)=>{e.classList.add(t.inactiveButtonClass),e.disabled=!0},r=e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach((r=>{((e,r)=>{const a=Array.from(e.querySelectorAll(r.inputSelector)),c=e.querySelector(r.submitButtonSelector);console.log(a),console.log(c),n(a,c,r),e.addEventListener("reset",(()=>{o(c,r)})),a.forEach((o=>{o.addEventListener("input",(function(){((e,n,o)=>{console.log(n.validationMessage),n.validity.valid?t(e,n,o):((e,t,n,o)=>{e.querySelector(`#${t.id}-error`).textContent=n,t.classList.add(o.inputErrorClass)})(e,n,n.validationMessage,o)})(e,o,r),n(a,c,r)}))}))})(r,e)}))};r(e);const a=new class{constructor({baseUrl:e,headers:t,cardID:n}){this._baseUrl=e,this._headers=t}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}addNewCard({name:e,link:t}){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:{...this._headers,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:{...this._headers,"Content-Type":"application/json"}}).then(this._checkResponse)}changeLike(e,t){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:{...this._headers,"Content-Type":"application/json"}}).then(this._checkResponse)}editUserInfo({name:e,about:t}){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:{...this._headers,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then(this._checkResponse)}changeProfilePicture({avatar:e}){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:{...this._headers,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"3865b531-c637-4f08-82ee-36af95a41c77","Content-Type":"application/json"}}),c=document.querySelector(".profile__avatar"),s=document.querySelector(".profile__name"),i=document.querySelector(".profile__title"),l=document.forms["profile-form"],d=document.querySelector(".profile__edit-button"),u=document.querySelector(".image__container"),m=document.querySelector("#avatar-modal"),h=document.querySelector("#avatar-form"),_=m.querySelector(".modal__submit-button"),v=document.querySelector("#avatar-link-input"),p=document.querySelector("#edit-profile-modal"),f=p.querySelector("#profile-name-input"),y=p.querySelector("#profile-description-input"),S=p.querySelector(".modal__submit-button"),C=document.querySelector(".profile__new-post-button"),b=document.querySelector("#add-card-modal"),k=b.querySelector("#add-card-link-input"),E=b.querySelector("#add-card-name-input"),q=document.forms["add-card-form"],g=b.querySelector(".modal__submit-button"),L=document.querySelector("#cards_list"),x=document.querySelector("#card-template"),T=document.querySelector("#preview-modal"),U=T.querySelector(".modal__image"),$=T.querySelector(".modal__caption"),A=document.querySelector("#delete-modal"),D=A.querySelector(".modal__delete-button"),P=document.querySelector(".modal__cancel-button");let w,I;const j=document.querySelectorAll(".modal__close-button"),R=document.querySelectorAll(".modal");a.getAppInfo().then((([e,t])=>{e.forEach((e=>{const t=G(e);L.append(t)})),c.src=t.avatar,console.log(t),i.textContent=t.about,s.textContent=t.name})).catch((e=>{console.error(e)})),l.addEventListener("submit",(function(e){e.preventDefault(),S.textContent="Saving...",a.editUserInfo({name:f.value,about:y.value}).then((e=>{S.textContent="Save",s.textContent=e.name,i.textContent=e.about,J(p)})).catch((()=>{S.textContent="Save failed. Try again.",console.error(),setTimeout((()=>{D.textContent="Save"}),2e3)}))})),D.addEventListener("click",(function(){D.textContent="Deleting...",a.deleteCard(I).then((()=>{D.textContent="Delete",w.remove(),J(A)})).catch((()=>{D.textContent="Delete failed. Try again.",console.error(),setTimeout((()=>{D.textContent="Delete"}),2e3)}))})),P.addEventListener("click",(()=>J(A))),q.addEventListener("submit",(function(e){e.preventDefault(),g.textContent="Saving...";const t={name:E.value,link:k.value};a.addNewCard(t).then((t=>{g.textContent="Save",J(b);const n=G(t);e.target.reset(),L.prepend(n)})).catch((()=>{g.textContent="Save failed. Try again.",console.error(),setTimeout((()=>{g.textContent="Save"}),2e3)}))})),u.addEventListener("click",(()=>{O(m)})),C.addEventListener("click",(()=>{O(b)})),_.addEventListener("click",(function(e){e.preventDefault(),_.textContent="Saving...";const t={avatar:v.value};a.changeProfilePicture(t).then((e=>{_.textContent="Save",e.avatar=v.value,J(m),h.reset(),c.src=e.avatar})).catch((()=>{_.textContent="Save failed. Try again.",console.error(),setTimeout((()=>{_.textContent="Save"}),2e3)}))})),d.addEventListener("click",(function(){var n,o;f.value=s.textContent,y.value=i.textContent,n=l,o=e,[f,y].forEach((e=>{t(n,e,o)})),O(p)}));const N=e=>{R.forEach((t=>{e.target===t&&t.classList.contains("modal_opened")&&J(t)}))},B=e=>{R.forEach((t=>{"Escape"===e.key&&R.forEach(J)}))};function O(e){e.classList.add("modal_opened"),document.addEventListener("mousedown",N),document.addEventListener("keydown",B)}function J(e){e.classList.remove("modal_opened"),document.removeEventListener("mousedown",N),document.removeEventListener("keydown",B)}function G(e){const t=x.content.querySelector(".card").cloneNode(!0);t.querySelector(".card__title").textContent=e.name;const n=t.querySelector(".card__image");n.src=e.link,n.alt=e.name;const o=t.querySelector(".card__like-button");return!0===e.isLiked&&o.classList.add("card__like-button_liked"),o.addEventListener("click",(t=>function(e,t){console.log(t),I=t._id;const n=!!e.target.classList.contains("card__like-button_liked");a.changeLike(t._id,n).then((()=>{!0===n?e.target.classList.remove("card__like-button_liked"):e.target.classList.add("card__like-button_liked")})).catch(console.error)}(t,e))),t.querySelector(".card__delete-button").addEventListener("click",(n=>function(e,t){w=e,I=t._id,O(A)}(t,e))),n.addEventListener("click",(()=>{U.src=e.link,U.alt=e.name,$.textContent=e.name,O(T)})),t}j.forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>J(t)))})),r(e)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SU8sT0FBT2hILFVBQVVXLElBQUksMEJBQzNCLElBRUQyRixNQUFNbkYsUUFBUXFGLE1BQ25CLENBekQ4QzBCLENBQWV6QixFQUFLRyxLQUU3Q1YsRUFBWXJHLGNBQWMsd0JBQ2xDd0IsaUJBQWlCLFNBQVVvRixHQStCeEMsU0FBMEJQLEVBQWFVLEdBQ3JDakIsRUFBZU8sRUFDZk4sRUFBaUJnQixFQUFLcUIsSUFDdEJkLEVBQVUzQixFQUNaLENBbENJMkMsQ0FBaUJqQyxFQUFhVSxLQUdoQ2tCLEVBQVV6RyxpQkFBaUIsU0FBUyxLQUNsQ2lFLEVBQWtCZSxJQUFNTyxFQUFLMUQsS0FDN0JvQyxFQUFrQnlDLElBQU1uQixFQUFLM0QsS0FDN0JzQyxFQUFvQnhGLFlBQWM2RyxFQUFLM0QsS0FDdkNrRSxFQUFVOUIsRUFBYSxJQUdsQmEsQ0FDVCxDQXJDQUwsRUFBYTVFLFNBQVNtSCxJQUNwQixNQUFNQyxFQUFRRCxFQUFPRSxRQUFRLFVBQzdCRixFQUFPL0csaUJBQWlCLFNBQVMsSUFBTXdGLEVBQVd3QixJQUFPLElBaUwzRHpILEVBQWlCMUIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9hcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcclxufTtcclxuXHJcbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbCwgZXJyb3JNc2csIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gZXJyb3JNc2c7XHJcbiAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG59O1xyXG5cclxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcclxuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKSA9PiB7XHJcbiAgY29uc29sZS5sb2coaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcblxyXG4gIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlLCBjb25maWcpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCwgY29uZmlnKSA9PiB7XHJcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsKSA9PiB7XHJcbiAgICByZXR1cm4gIWlucHV0RWwudmFsaWRpdHkudmFsaWQ7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGRpc2FibGVCdXR0b24gPSAoYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsLCBpbnB1dExpc3QsIGNvbmZpZykgPT4ge1xyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dCwgY29uZmlnKTtcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbCwgY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWwucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICBjb25zb2xlLmxvZyhpbnB1dExpc3QpO1xyXG4gIGNvbnNvbGUubG9nKGJ1dHRvbkVsZW1lbnQpO1xyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoKSA9PiB7XHJcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgfSk7XHJcblxyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XHJcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsLCBjb25maWcpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XHJcbiIsImltcG9ydCB7XHJcbiAgZW5hYmxlVmFsaWRhdGlvbixcclxuICBzZXR0aW5ncyxcclxuICByZXNldFZhbGlkYXRpb24sXHJcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xyXG5cclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL2FwaS5qc1wiO1xyXG5cclxuLy8gY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4vLyAgIHtcclxuLy8gICAgIG5hbWU6IFwiVmFsIFRob3JlbnNcIixcclxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8xLXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcclxuLy8gICB9LFxyXG5cclxuLy8gICB7XHJcbi8vICAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxyXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzItcGhvdG8tYnktY2VpbGluZS1mcm9tLXBleGVscy5qcGdcIixcclxuLy8gICB9LFxyXG5cclxuLy8gICB7XHJcbi8vICAgICBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLFxyXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzMtcGhvdG8tYnktdHViYW51ci1kb2dhbi1mcm9tLXBleGVscy5qcGdcIixcclxuLy8gICB9LFxyXG5cclxuLy8gICB7XHJcbi8vICAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0IGFuZCB0aHJvdWdoIHRoZSB0cmVlc1wiLFxyXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzQtcGhvdG8tYnktbWF1cmljZS1sYXNjaGV0LWZyb20tcGV4ZWxzLmpwZ1wiLFxyXG4vLyAgIH0sXHJcblxyXG4vLyAgIHtcclxuLy8gICAgIG5hbWU6IFwiVHVubmVsIHdpdGggbW9ybmluZyBsaWdodFwiLFxyXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbi8vICAgfSxcclxuXHJcbi8vICAge1xyXG4vLyAgICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxyXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzYtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiLFxyXG4vLyAgIH0sXHJcblxyXG4vLyAgIHtcclxuLy8gICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgQnJpZGdlXCIsXHJcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNy1waG90by1ieS1ncmlmZmluLXdvb2xkcmlkZ2UtZnJvbS1wZXhlbHMuanBnXCIsXHJcbi8vICAgfSxcclxuLy8gXTtcclxuXHJcbi8vSW5zdGFudGlhdGUgQXBpIGNsYXNzXHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIzODY1YjUzMS1jNjM3LTRmMDgtODJlZS0zNmFmOTVhNDFjNzdcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy9TRUxFQ1RJTkcgRUxFTUVOVFNcclxuXHJcbi8vUHJvZmlsZSBFbGVtZW50c1xyXG5jb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmNvbnN0IGVkaXRGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1mb3JtXCJdO1xyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcblxyXG4vL0F2YXRhciBFbGVtZW50c1xyXG5jb25zdCBjaGFuZ2VQcm9mUGljID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZV9fY29udGFpbmVyXCIpO1xyXG5jb25zdCBhdmF0YXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLW1vZGFsXCIpO1xyXG5jb25zdCBhdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItZm9ybVwiKTtcclxuY29uc3QgYXZhdGFyTW9kYWxTdWJtaXQgPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBhdmF0YXJQaWNMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItbGluay1pbnB1dFwiKTtcclxuXHJcbi8vUHJvZmlsZSBFZGl0IE1vZGFsIEVsZW1lbnRzXHJcbmNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xyXG5jb25zdCBlZGl0TW9kYWxOYW1lSW5wdXQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XHJcbmNvbnN0IGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuY29uc3QgcHJvZmlsZUVkaXRTdWJtaXRCdXR0b24gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiXHJcbik7XHJcblxyXG4vL05ldyBQb3N0IEVsZW1lbnRzXHJcbmNvbnN0IGNhcmRNb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmV3LXBvc3QtYnV0dG9uXCIpO1xyXG5jb25zdCBjYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xyXG5jb25zdCBjYXJkTW9kYWxJbWFnZUxpbmtJbnB1dCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWxpbmstaW5wdXRcIik7XHJcbmNvbnN0IGNhcmRNb2RhbENhcHRpb25JbnB1dCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW5hbWUtaW5wdXRcIik7XHJcbmNvbnN0IGNhcmRNb2RhbEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJhZGQtY2FyZC1mb3JtXCJdO1xyXG5jb25zdCBjYXJkU3VibWl0QnV0dG9uID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIik7XHJcblxyXG4vL0NhcmQgR2FsbGVyeSBFbGVtZW50c1xyXG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmRzX2xpc3RcIik7XHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcclxuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xyXG5jb25zdCBwcmV2aWV3TW9kYWxJbWFnZSA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuY29uc3QgcHJldmlld01vZGFsQ2FwdGlvbiA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG5cclxuLy9EZWxldGUgTW9kYWwgRWxlbWVudHNcclxuY29uc3QgZGVsZXRlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1tb2RhbFwiKTtcclxuY29uc3QgZGVsZXRlQnV0dG9uID0gZGVsZXRlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FuY2VsLWJ1dHRvblwiKTtcclxubGV0IHNlbGVjdGVkQ2FyZDtcclxubGV0IHNlbGVjdGVkQ2FyZElkO1xyXG5cclxuLy9HbG9iYWwgRWxlbWVudHNcclxuY29uc3QgY2xvc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xyXG5jb25zdCBtb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpO1xyXG5cclxuYXBpXHJcbiAgLmdldEFwcEluZm8oKVxyXG4gIC50aGVuKChbY2FyZHMsIHVzZXJdKSA9PiB7XHJcbiAgICBjYXJkcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XHJcbiAgICAgIGNhcmRzTGlzdC5hcHBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcHJvZmlsZUltYWdlLnNyYyA9IHVzZXIuYXZhdGFyO1xyXG4gICAgY29uc29sZS5sb2codXNlcik7XHJcblxyXG4gICAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdXNlci5hYm91dDtcclxuICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gdXNlci5uYW1lO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9KTtcclxuXHJcbi8vRVZFTlQgTElTVEVORVJTXHJcbmVkaXRGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcclxuZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVEZWxldGVTdWJtaXQpO1xyXG5jYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNsb3NlTW9kYWwoZGVsZXRlTW9kYWwpKTtcclxuY2FyZE1vZGFsRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVOZXdQb3N0Rm9ybVN1Ym1pdCk7XHJcbmNoYW5nZVByb2ZQaWMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBvcGVuTW9kYWwoYXZhdGFyTW9kYWwpO1xyXG59KTtcclxuY2FyZE1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgb3Blbk1vZGFsKGNhcmRNb2RhbCk7XHJcbn0pO1xyXG5hdmF0YXJNb2RhbFN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQXZhdGFyU3VibWl0KTtcclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcclxuICBcImNsaWNrXCIsXHJcbiAgaGFuZGxlUHJvZmlsZUVkaXRcclxuXHJcbiAgLy8gKCkgPT4ge1xyXG4gIC8vIGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gIC8vIGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XHJcbiAgLy8gcmVzZXRWYWxpZGF0aW9uKFxyXG4gIC8vICAgZWRpdEZvcm1FbGVtZW50LFxyXG4gIC8vICAgW2VkaXRNb2RhbE5hbWVJbnB1dCwgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dF0sXHJcbiAgLy8gICBzZXR0aW5nc1xyXG4gIC8vICk7XHJcbiAgLy8gb3Blbk1vZGFsKGVkaXRNb2RhbCk7fVxyXG4pO1xyXG5cclxuLy9FVkVOVCBIQU5ETEVSU1xyXG5cclxuLy9HbG9iYWwgRnVuY3Rpb25hbGl0eVxyXG5jb25zdCBoYW5kbGVDbGlja091dHNpZGUgPSAoZXZ0KSA9PiB7XHJcbiAgbW9kYWxzLmZvckVhY2goKG1vZGFsKSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gbW9kYWwgJiYgbW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XHJcbiAgICAgIGNsb3NlTW9kYWwobW9kYWwpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlRXNjYXBlTW9kYWwgPSAoZXZ0KSA9PiB7XHJcbiAgbW9kYWxzLmZvckVhY2goKG1vZGFsKSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICBtb2RhbHMuZm9yRWFjaChjbG9zZU1vZGFsKTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVDbGlja091dHNpZGUpO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZU1vZGFsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVDbGlja091dHNpZGUpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZU1vZGFsKTtcclxufVxyXG5cclxuY2xvc2VCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xyXG4gIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoXCIubW9kYWxcIik7XHJcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZU1vZGFsKHBvcHVwKSk7XHJcbn0pO1xyXG5cclxuLy9DYXJkcyBhbmQgQ2FyZCBHYWxsZXJ5XHJcbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jb250ZW50XHJcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICBjb25zdCBjYXJkTmFtZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgY2FyZE5hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcblxyXG4gIGNvbnN0IGNhcmRJbWFnZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgY2FyZEltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICBjYXJkSW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xyXG5cclxuICBjb25zdCBjYXJkTGlrZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgaWYgKGRhdGEuaXNMaWtlZCA9PT0gdHJ1ZSkge1xyXG4gICAgY2FyZExpa2UuY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2xpa2VkXCIpO1xyXG4gIH1cclxuICBjYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4gaGFuZGxlTGlrZUNhcmQoZXZ0LCBkYXRhKSk7XHJcblxyXG4gIGNvbnN0IGNhcmREZWxldGUgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbiAgY2FyZERlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT5cclxuICAgIGhhbmRsZURlbGV0ZUNhcmQoY2FyZEVsZW1lbnQsIGRhdGEpXHJcbiAgKTtcclxuXHJcbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwcmV2aWV3TW9kYWxJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICBwcmV2aWV3TW9kYWxJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgICBwcmV2aWV3TW9kYWxDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgb3Blbk1vZGFsKHByZXZpZXdNb2RhbCk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVTdWJtaXQoKSB7XHJcbiAgLy8gZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgZGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCJEZWxldGluZy4uLlwiO1xyXG4gIGFwaVxyXG4gICAgLmRlbGV0ZUNhcmQoc2VsZWN0ZWRDYXJkSWQpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGRlbGV0ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRlXCI7XHJcbiAgICAgIHNlbGVjdGVkQ2FyZC5yZW1vdmUoKTtcclxuICAgICAgY2xvc2VNb2RhbChkZWxldGVNb2RhbCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKCgpID0+IHtcclxuICAgICAgZGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCJEZWxldGUgZmFpbGVkLiBUcnkgYWdhaW4uXCI7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gXCJEZWxldGVcIjtcclxuICAgICAgfSwgMjAwMCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkKGNhcmRFbGVtZW50LCBkYXRhKSB7XHJcbiAgc2VsZWN0ZWRDYXJkID0gY2FyZEVsZW1lbnQ7XHJcbiAgc2VsZWN0ZWRDYXJkSWQgPSBkYXRhLl9pZDtcclxuICBvcGVuTW9kYWwoZGVsZXRlTW9kYWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2FyZChldnQsIGRhdGEpIHtcclxuICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICBzZWxlY3RlZENhcmRJZCA9IGRhdGEuX2lkO1xyXG4gIGNvbnN0IGlzTGlrZWQgPSBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImNhcmRfX2xpa2UtYnV0dG9uX2xpa2VkXCIpXHJcbiAgICA/IHRydWVcclxuICAgIDogZmFsc2U7XHJcblxyXG4gIGFwaVxyXG4gICAgLmNoYW5nZUxpa2UoZGF0YS5faWQsIGlzTGlrZWQpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGlmIChpc0xpa2VkID09PSB0cnVlKSB7XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fbGlrZWRcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fbGlrZWRcIik7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbn1cclxuXHJcbi8vQ3JlYXRlIE5ldyBQb3N0XHJcbmZ1bmN0aW9uIGhhbmRsZU5ld1Bvc3RGb3JtU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNhcmRTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG5cclxuICBjb25zdCBpbnB1dFZhbHVlcyA9IHtcclxuICAgIG5hbWU6IGNhcmRNb2RhbENhcHRpb25JbnB1dC52YWx1ZSxcclxuICAgIGxpbms6IGNhcmRNb2RhbEltYWdlTGlua0lucHV0LnZhbHVlLFxyXG4gIH07XHJcblxyXG4gIGFwaVxyXG4gICAgLmFkZE5ld0NhcmQoaW5wdXRWYWx1ZXMpXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICBjYXJkU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICAgIGNsb3NlTW9kYWwoY2FyZE1vZGFsKTtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChkYXRhKTtcclxuXHJcbiAgICAgIGV2dC50YXJnZXQucmVzZXQoKTtcclxuICAgICAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoKSA9PiB7XHJcbiAgICAgIGNhcmRTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmUgZmFpbGVkLiBUcnkgYWdhaW4uXCI7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgY2FyZFN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgICB9LCAyMDAwKTtcclxuICAgIH0pO1xyXG5cclxuICAvL1xyXG5cclxuICAvL1xyXG4gIC8vIC8vIGRpc2FibGVCdXR0b24oY2FyZFN1Ym1pdEJ1dHRvbiwgc2V0dGluZ3MpO1xyXG4gIC8vXHJcbn1cclxuLy9VcGRhdGUgUHJvZmlsZSBQaG90b1xyXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWJtaXQoZXZ0KSB7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgYXZhdGFyTW9kYWxTdWJtaXQudGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG5cclxuICBjb25zdCBpbnB1dFZhbHVlcyA9IHtcclxuICAgIGF2YXRhcjogYXZhdGFyUGljTGluay52YWx1ZSxcclxuICB9O1xyXG4gIC8vIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaW5wdXRWYWx1ZXMpO1xyXG5cclxuICBhcGlcclxuICAgIC5jaGFuZ2VQcm9maWxlUGljdHVyZShpbnB1dFZhbHVlcylcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIGF2YXRhck1vZGFsU3VibWl0LnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICAgIGRhdGEuYXZhdGFyID0gYXZhdGFyUGljTGluay52YWx1ZTtcclxuICAgICAgY2xvc2VNb2RhbChhdmF0YXJNb2RhbCk7XHJcbiAgICAgIGF2YXRhckZvcm0ucmVzZXQoKTtcclxuICAgICAgcHJvZmlsZUltYWdlLnNyYyA9IGRhdGEuYXZhdGFyO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoKSA9PiB7XHJcbiAgICAgIGF2YXRhck1vZGFsU3VibWl0LnRleHRDb250ZW50ID0gXCJTYXZlIGZhaWxlZC4gVHJ5IGFnYWluLlwiO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGF2YXRhck1vZGFsU3VibWl0LnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICAgIH0sIDIwMDApO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vRWRpdCBQcm9maWxlIEluZm9ybWF0aW9uXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0KCkge1xyXG4gIGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gIGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XHJcbiAgcmVzZXRWYWxpZGF0aW9uKFxyXG4gICAgZWRpdEZvcm1FbGVtZW50LFxyXG4gICAgW2VkaXRNb2RhbE5hbWVJbnB1dCwgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dF0sXHJcbiAgICBzZXR0aW5nc1xyXG4gICk7XHJcbiAgb3Blbk1vZGFsKGVkaXRNb2RhbCk7XHJcbn1cclxuXHJcbi8vVXBkYXRlIFByb2ZpbGUgTmFtZSBhbmQgRGVzY3JpcHRpb25cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgcHJvZmlsZUVkaXRTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gIGFwaVxyXG4gICAgLmVkaXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZSxcclxuICAgICAgYWJvdXQ6IGVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQudmFsdWUsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgcHJvZmlsZUVkaXRTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICAgIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XHJcbiAgICAgIGNsb3NlTW9kYWwoZWRpdE1vZGFsKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKCkgPT4ge1xyXG4gICAgICBwcm9maWxlRWRpdFN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZSBmYWlsZWQuIFRyeSBhZ2Fpbi5cIjtcclxuICAgICAgY29uc29sZS5lcnJvcigpO1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBkZWxldGVCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgICAgfSwgMjAwMCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XHJcbiIsImNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzLCBjYXJkSUQgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIC8vIHRoaXMuYWJvdXQgPSBhYm91dDtcclxuICAgIC8vIHRoaXMuYXZhdGFyID0gYXZhdGFyO1xyXG4gICAgLy8gdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIC8vIHRoaXMuX2lkID0gX2lkO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldEFwcEluZm8oKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGlhbENhcmRzKCksIHRoaXMuZ2V0VXNlckluZm8oKV0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHsgLi4udGhpcy5faGVhZGVycywgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHsgLi4udGhpcy5faGVhZGVycywgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VMaWtlKGlkLCBpc0xpa2VkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogaXNMaWtlZCA/IFwiREVMRVRFXCIgOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7IC4uLnRoaXMuX2hlYWRlcnMsIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogeyAuLi50aGlzLl9oZWFkZXJzLCBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlUHJvZmlsZVBpY3R1cmUoeyBhdmF0YXIgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHsgLi4udGhpcy5faGVhZGVycywgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcixcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBpO1xyXG4iXSwibmFtZXMiOlsic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsIiwiaW5wdXRFbCIsImNvbmZpZyIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50IiwiaGFzSW52YWxpZElucHV0Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJhZGQiLCJlbmFibGVWYWxpZGF0aW9uIiwiQXJyYXkiLCJmcm9tIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInNldEV2ZW50TGlzdGVuZXJzIiwiY29uc29sZSIsImxvZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNc2ciLCJhcGkiLCJjb25zdHJ1Y3RvciIsImJhc2VVcmwiLCJoZWFkZXJzIiwiY2FyZElEIiwidGhpcyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRBcHBJbmZvIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJhZGROZXdDYXJkIiwibmFtZSIsImxpbmsiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImRlbGV0ZUNhcmQiLCJjaGFuZ2VMaWtlIiwiaXNMaWtlZCIsImVkaXRVc2VySW5mbyIsImFib3V0IiwiY2hhbmdlUHJvZmlsZVBpY3R1cmUiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwicHJvZmlsZUltYWdlIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJlZGl0Rm9ybUVsZW1lbnQiLCJmb3JtcyIsInByb2ZpbGVFZGl0QnV0dG9uIiwiY2hhbmdlUHJvZlBpYyIsImF2YXRhck1vZGFsIiwiYXZhdGFyRm9ybSIsImF2YXRhck1vZGFsU3VibWl0IiwiYXZhdGFyUGljTGluayIsImVkaXRNb2RhbCIsImVkaXRNb2RhbE5hbWVJbnB1dCIsImVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlRWRpdFN1Ym1pdEJ1dHRvbiIsImNhcmRNb2RhbEJ1dHRvbiIsImNhcmRNb2RhbCIsImNhcmRNb2RhbEltYWdlTGlua0lucHV0IiwiY2FyZE1vZGFsQ2FwdGlvbklucHV0IiwiY2FyZE1vZGFsRm9ybUVsZW1lbnQiLCJjYXJkU3VibWl0QnV0dG9uIiwiY2FyZHNMaXN0IiwiY2FyZFRlbXBsYXRlIiwicHJldmlld01vZGFsIiwicHJldmlld01vZGFsSW1hZ2UiLCJwcmV2aWV3TW9kYWxDYXB0aW9uIiwiZGVsZXRlTW9kYWwiLCJkZWxldGVCdXR0b24iLCJjYW5jZWxCdXR0b24iLCJzZWxlY3RlZENhcmQiLCJzZWxlY3RlZENhcmRJZCIsImNsb3NlQnV0dG9ucyIsIm1vZGFscyIsImNhcmRzIiwidXNlciIsIml0ZW0iLCJjYXJkRWxlbWVudCIsImdldENhcmRFbGVtZW50IiwiYXBwZW5kIiwic3JjIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImV2dCIsInByZXZlbnREZWZhdWx0IiwidmFsdWUiLCJkYXRhIiwiY2xvc2VNb2RhbCIsInNldFRpbWVvdXQiLCJpbnB1dFZhbHVlcyIsInRhcmdldCIsInJlc2V0IiwicHJlcGVuZCIsIm9wZW5Nb2RhbCIsInJlc2V0VmFsaWRhdGlvbiIsImlucHV0IiwiaGFuZGxlQ2xpY2tPdXRzaWRlIiwibW9kYWwiLCJjb250YWlucyIsImhhbmRsZUVzY2FwZU1vZGFsIiwia2V5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkSW1hZ2UiLCJhbHQiLCJjYXJkTGlrZSIsIl9pZCIsImhhbmRsZUxpa2VDYXJkIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImJ1dHRvbiIsInBvcHVwIiwiY2xvc2VzdCJdLCJzb3VyY2VSb290IjoiIn0=